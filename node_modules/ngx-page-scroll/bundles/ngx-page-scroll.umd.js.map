{"version":3,"file":"ngx-page-scroll.umd.js","sources":["ng://ngx-page-scroll/lib/ngx-page-scroll.directive.ts","ng://ngx-page-scroll/lib/ngx-page-scroll.module.ts"],"sourcesContent":["/* tslint:disable:no-host-metadata-property directive-selector */\n\nimport {\n  Directive,\n  EventEmitter,\n  Inject,\n  Input,\n  OnChanges,\n  OnDestroy,\n  Optional,\n  Output,\n  SimpleChanges\n} from '@angular/core';\nimport { NavigationCancel, NavigationEnd, NavigationError, Router, UrlTree } from '@angular/router';\nimport { DOCUMENT } from '@angular/common';\n\nimport { Subscription } from 'rxjs';\nimport { EasingLogic, PageScrollInstance, PageScrollOptions, PageScrollService } from 'ngx-page-scroll-core';\n\n@Directive({\n  selector: '[pageScroll]',\n  host: {\n    '(click)': 'handleClick($event)',\n  },\n})\nexport class NgxPageScrollDirective implements OnChanges, OnDestroy {\n\n  @Input()\n  public routerLink: any;\n\n  @Input()\n  public href: string;\n\n  @Input()\n  public pageScrollTarget: string;\n\n  @Input()\n  public pageScrollHorizontal: boolean;\n\n  @Input()\n  public pageScrollOffset: number;\n\n  @Input()\n  public pageScrollDuration: number;\n\n  @Input()\n  public pageScrollSpeed: number;\n\n  @Input()\n  public pageScrollEasing: EasingLogic;\n\n  @Input()\n  public pageScrollInterruptible: boolean;\n\n  @Input()\n  public pageScrollInView: boolean;\n\n  @Input()\n  public pageScrollAdjustHash = false;\n\n  @Input()\n  public pageScroll: string;\n\n  @Output()\n  pageScrollFinish: EventEmitter<boolean> = new EventEmitter<boolean>();\n\n  private pageScrollInstance: PageScrollInstance;\n  private document: Document;\n\n  constructor(private pageScrollService: PageScrollService, @Optional() private router: Router, @Inject(DOCUMENT) document: any) {\n    this.document = <Document>document;\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    // Some inputs changed, reset the pageScrollInstance\n    this.pageScrollInstance = undefined;\n  }\n\n  ngOnDestroy(): void {\n    if (this.pageScrollInstance) {\n      this.pageScrollService.stop(this.pageScrollInstance);\n    }\n  }\n\n  private generatePageScrollInstance(): PageScrollInstance {\n    if (this.pageScrollInstance === undefined || this.pageScrollInstance === null) {\n      const options: PageScrollOptions = {\n        document: this.document,\n        scrollTarget: this.pageScrollTarget || this.href,\n      };\n\n      if (this.pageScroll) {\n        options.namespace = this.pageScroll;\n      }\n      if (this.pageScrollHorizontal !== undefined && this.pageScrollHorizontal !== null) {\n        options.verticalScrolling = !this.pageScrollHorizontal;\n      }\n      if (this.pageScrollOffset !== undefined && this.pageScrollOffset !== null) {\n        options.scrollOffset = this.pageScrollOffset;\n      }\n      if (this.pageScrollInterruptible !== undefined && this.pageScrollInterruptible !== null) {\n        options.interruptible = this.pageScrollInterruptible;\n      }\n      if (this.pageScrollInView !== undefined && this.pageScrollInView !== null) {\n        options.scrollInView = this.pageScrollInView;\n      }\n      if (this.pageScrollEasing) {\n        options.easingLogic = this.pageScrollEasing;\n      }\n      if (this.pageScrollDuration !== undefined && this.pageScrollDuration !== null) {\n        options.duration = this.pageScrollDuration;\n      }\n      if (this.pageScrollSpeed !== undefined && this.pageScrollSpeed !== null) {\n        options.speed = this.pageScrollSpeed;\n      }\n      if (this.pageScrollFinish) {\n        options.scrollFinishListener = this.pageScrollFinish;\n      }\n      this.pageScrollInstance = this.pageScrollService.create(options);\n    }\n\n    return this.pageScrollInstance;\n  }\n\n  private pushRouterState() {\n    if (this.pageScrollAdjustHash && typeof this.pageScrollInstance.pageScrollOptions.scrollTarget === 'string'\n      && (<string>this.pageScrollInstance.pageScrollOptions.scrollTarget).substr(0, 1) === '#') {\n      // \"Navigate\" to the current route again and this time set the fragment/hash\n      this.router.navigate([], {\n        fragment: (<string>this.pageScrollInstance.pageScrollOptions.scrollTarget).substr(1),\n        preserveQueryParams: true,\n      });\n    }\n  }\n\n  private scroll(): void {\n    const pageScrollInstance = this.generatePageScrollInstance();\n    this.pushRouterState();\n    this.pageScrollService.start(pageScrollInstance);\n  }\n\n  public handleClick(clickEvent: Event): boolean { // tslint:disable-line:no-unused-variable\n    if (this.routerLink && this.router !== null && this.router !== undefined) {\n      let urlTree: UrlTree;\n      if (typeof this.routerLink === 'string') {\n        urlTree = this.router.parseUrl(this.routerLink);\n      } else {\n        urlTree = this.router.createUrlTree(this.routerLink);\n      }\n      if (!this.router.isActive(urlTree, true)) {\n        // We need to navigate their first.\n        // Navigation is handled by the routerLink directive\n        // so we only need to listen for route change\n        const subscription: Subscription = <Subscription>this.router.events.subscribe((routerEvent) => {\n          if (routerEvent instanceof NavigationEnd) {\n            subscription.unsubscribe();\n            // use a timeout to start scrolling as soon as the stack is cleared\n            setTimeout(() => {\n              this.scroll();\n            }, 0);\n          } else if (routerEvent instanceof NavigationError || routerEvent instanceof NavigationCancel) {\n            subscription.unsubscribe();\n          }\n        });\n\n        return false; // to preventDefault()\n      }\n    }\n    this.scroll();\n\n    return false; // to preventDefault()\n  }\n}\n","import { NgModule } from '@angular/core';\n\nimport { NgxPageScrollCoreModule } from 'ngx-page-scroll-core';\n\nimport { NgxPageScrollDirective } from './ngx-page-scroll.directive';\n\n@NgModule({\n  declarations: [\n    NgxPageScrollDirective,\n  ],\n  imports: [\n    NgxPageScrollCoreModule,\n  ],\n  exports: [\n    NgxPageScrollDirective,\n  ],\n})\nexport class NgxPageScrollModule {\n}\n"],"names":["EventEmitter","NavigationEnd","NavigationError","NavigationCancel","Directive","PageScrollService","Router","Optional","Inject","DOCUMENT","Input","Output","NgModule","NgxPageScrollCoreModule"],"mappings":"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"}